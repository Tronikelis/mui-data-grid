import{jsx as i,Fragment as e,jsxs as t}from"react/jsx-runtime";import{useState as n,useEffect as o,memo as r,useRef as d}from"react";import{TableRow as s,TableCell as c,TableContainer as l,Table as a,TableHead as v,Box as h,TableSortLabel as m,TableBody as p,LinearProgress as u}from"@mui/material";import{sort as x}from"fast-sort";import{dequal as f}from"dequal";import{useCustomCompareEffect as g}from"use-custom-compare";import{Virtuoso as b}from"react-virtuoso";const j={cursor:"pointer",color:"#1b4394"};function w(r){const{length:d=30,obj:s,lessText:c="Less",moreText:l="More"}=r,[a,v]=n(""),[h,m]=n(!0);o((()=>{var i;i=s,"[object String]"===Object.prototype.toString.call(i)&&v(s)}),[s]);const p=()=>{m((i=>!i))};return a?i(e,{children:t(e,h?{children:[a.substring(0,h?d:a.length),"... ",i("span",Object.assign({onClick:p,style:j},{children:l}),void 0)]}:{children:[a," ",i("span",Object.assign({onClick:p,style:j},{children:c}),void 0)]},void 0)},void 0):s}function O(e){const{columns:o,rows:r,component:u,loading:j,sx:w,overscanCount:O=0,truncateText:k}=e,[S,T]=n(!1),[D,I]=n(""),[q,B]=n(r),L=d(null);g((()=>{B(r)}),[r],f);return i(l,Object.assign({component:null!=u?u:"div",sx:{height:"100%",width:"100%",display:"flex",flexDirection:"column"}},{children:t(a,Object.assign({sx:Object.assign({minWidth:"300px",display:"flex",flexDirection:"column"},w),component:"div"},{children:[i(v,Object.assign({component:"div"},{children:i(s,Object.assign({sx:{display:"flex"},component:"div"},{children:o.map((({field:e,flex:t,width:n})=>i(c,Object.assign({sx:{flex:n||t?t:1,width:n,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},component:"div"},{children:i(h,Object.assign({sx:{display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%"}},{children:i(m,Object.assign({active:D===e,direction:S?"asc":"desc",onClick:()=>{((i,e)=>{var t;null===(t=L.current)||void 0===t||t.scrollToIndex({index:0}),I(e),B((t=>i?x(t).asc((i=>i[e])):x(t).desc((i=>i[e]))))})(!S,e),T((i=>!i))}},{children:e.toString()}),void 0)}),void 0)}),e)))}),void 0)}),void 0),t(p,Object.assign({sx:{width:"100%",height:"100%",position:"relative"},component:"div"},{children:[j&&i(y,{},void 0),i(b,{height:"100%",width:"100%",ref:L,data:q,overscan:O,itemContent:(e,t)=>i(C,{columns:o,row:t,index:e,truncate:k},void 0)},void 0)]}),void 0)]}),void 0)}),void 0)}function y(){return i(u,{sx:{position:"absolute",top:"0px",width:"100%"}},void 0)}const C=r((t=>{const{columns:n,row:o,index:r,truncate:d}=t,l=(t,n)=>{var d,s;return n?i(e,{children:n({index:r,data:null!==(d=null==o?void 0:o[t])&&void 0!==d?d:""})},void 0):null===(s=null==o?void 0:o[t])||void 0===s?void 0:s.toString()};return i("div",Object.assign({style:{width:"100%",height:"100%"}},{children:i(s,Object.assign({sx:{display:"flex"},component:"div",hover:!0},{children:n.map((({field:t,flex:n,width:o,renderCell:r},s)=>i(c,Object.assign({component:"div",sx:{flex:o||n?n:1,width:o,wordBreak:"break-word"}},{children:d?i(w,Object.assign({obj:l(t,r)},d),void 0):i(e,{children:l(t,r)},void 0)}),s)))}),void 0)}),void 0)}));export{O as MuiDataTable};
