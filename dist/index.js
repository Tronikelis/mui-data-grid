import{jsx as i,Fragment as e,jsxs as t}from"react/jsx-runtime";import{useState as o,useEffect as n,memo as r,useRef as d}from"react";import{TableRow as s,TableCell as c,TableContainer as l,Table as a,TableHead as v,Box as h,TableSortLabel as m,TableBody as p,LinearProgress as u}from"@mui/material";import{sort as x}from"fast-sort";import{dequal as f}from"dequal";import{useCustomCompareEffect as g}from"use-custom-compare";import{Virtuoso as b}from"react-virtuoso";const j={cursor:"pointer",color:"#1b4394",fontWeight:"bold"};function w(r){const{length:d=30,obj:s,lessText:c="Less",moreText:l="More"}=r,[a,v]=o(""),[h,m]=o(!0);n((()=>{var i;i=s,"[object String]"===Object.prototype.toString.call(i)&&v(s)}),[s]);const p=()=>{m((i=>!i))};return a?i(e,{children:t(e,h?{children:[a.substring(0,h?d:a.length),"... ",i("span",Object.assign({onClick:p,style:j},{children:l}),void 0)]}:{children:[a," ",i("span",Object.assign({onClick:p,style:j},{children:c}),void 0)]},void 0)},void 0):s}function O(e){const{columns:n,rows:r,component:u,loading:j,sx:w,overscanCount:O=0,truncateText:k}=e,[S,T]=o(!1),[D,I]=o(""),[W,q]=o(r),B=d(null);g((()=>{q(r)}),[r],f);return i(l,Object.assign({component:null!=u?u:"div",sx:{height:"100%",width:"100%",display:"flex",flexDirection:"column"}},{children:t(a,Object.assign({sx:Object.assign({minWidth:"300px",display:"flex",flexDirection:"column"},w),component:"div"},{children:[i(v,Object.assign({component:"div"},{children:i(s,Object.assign({sx:{display:"flex"},component:"div"},{children:n.map((({field:e,flex:t,width:o})=>i(c,Object.assign({sx:{flex:o||t?t:1,width:o,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},component:"div"},{children:i(h,Object.assign({sx:{display:"flex",justifyContent:"flex-start",alignItems:"center",width:"100%"}},{children:i(m,Object.assign({active:D===e,direction:S?"asc":"desc",onClick:()=>{((i,e)=>{var t;null===(t=B.current)||void 0===t||t.scrollToIndex({index:0}),I(e),q((t=>i?x(t).asc((i=>i[e])):x(t).desc((i=>i[e]))))})(!S,e),T((i=>!i))}},{children:e.toString()}),void 0)}),void 0)}),e)))}),void 0)}),void 0),t(p,Object.assign({sx:{width:"100%",height:"100%",position:"relative"},component:"div"},{children:[j&&i(y,{},void 0),i(b,{height:"100%",width:"100%",ref:B,data:W,overscan:O,itemContent:(e,t)=>i(C,{columns:n,row:t,index:e,truncate:k},void 0)},void 0)]}),void 0)]}),void 0)}),void 0)}function y(){return i(u,{sx:{position:"absolute",top:"0px",width:"100%"}},void 0)}const C=r((t=>{const{columns:o,row:n,index:r,truncate:d}=t,l=(t,o)=>{var d,s;return o?i(e,{children:o({index:r,data:null!==(d=null==n?void 0:n[t])&&void 0!==d?d:""})},void 0):null===(s=null==n?void 0:n[t])||void 0===s?void 0:s.toString()};return i("div",Object.assign({style:{width:"100%",height:"100%"}},{children:i(s,Object.assign({sx:{display:"flex"},component:"div",hover:!0},{children:o.map((({field:t,flex:o,width:n,renderCell:r},s)=>i(c,Object.assign({component:"div",sx:{flex:n||o?o:1,width:n,wordBreak:"break-word"}},{children:d?i(w,Object.assign({obj:l(t,r)},d),void 0):i(e,{children:l(t,r)},void 0)}),s)))}),void 0)}),void 0)}));export{O as MuiDataTable};
